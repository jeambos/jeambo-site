---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Nav from '../components/Nav.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import FormattedDate from '../components/FormattedDate.astro';

// ðŸ‘‡ å¿…é¡»åŠ ä¸Šè¿™ä¸€è¡Œï¼å¦åˆ™ Astro ä¸çŸ¥é“åŽ»å“ªé‡Œæ‰¾æ–‡ç« 
import { getCollection } from 'astro:content';

// å¼•å…¥ Markdown ç»„ä»¶
import Intro from '../components/Intro.md';

// èŽ·å–åšå®¢æ–‡ç« å¹¶æŽ’åº
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title="Home" description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header><Nav /></Header>
    <main>
            <article>
                <Intro />
            </article>

            <hr class="divider" />
            
            <section>
				<ul>
					{
						posts.map((post) => (
							<li>
								<a href={`/blog/${post.slug}/`}>
                                    {post.data.title}
								</a>
                                <span class="date">
                                    <FormattedDate date={post.data.pubDate} />
                                </span>
							</li>
						))
					}
				</ul>
			</section>
		</main>
    <Footer />
  </body>
</html>
