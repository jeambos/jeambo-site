/* src/styles/global.css */
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;600&family=Noto+Serif+SC:wght@300;500;700&display=swap');

:root {
  --bg-body: #fcfbf9;
  --text-main: #333333;
  --text-muted: #888888;
  --accent: #d97706;        /* 深金橙 */
  --line-color: #e5e5e5;
  /* 进度条渐变 (保持低饱和度，与高亮的Header形成对比) */
  --gradient-bar: linear-gradient(90deg, #dca54c 0%, #d48a7b 100%);
  
  /* === 新版 Header 鲜艳色板 === */
  --header-yellow: #e09900; /* 明亮黄 */
  --header-orange: #ff8f07; /* 鲜艳橙 */
  --header-red: #d35400;    /* 偏红橘 */
}

[data-theme="dark"] {
  --bg-body: #1c1c1c;
  --text-main: #e0e0e0;
  --text-muted: #666666;
  --accent: #fbbf24;
  --line-color: #333333;
  /* 暗黑模式下稍微提亮一点点 */
  --header-yellow: #fff176;
  --header-orange: #ffb74d;
  --header-red: #ff8a65;
}

html { font-size: 18px; }

body {
  background-color: var(--bg-body);
  color: var(--text-main);
  font-family: "Cormorant Garamond", "Noto Serif SC", "Songti SC", serif;
  line-height: 1.8;
  letter-spacing: 0.02em;
}

/* 噪点质感 */
body::before {
  content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
  pointer-events: none; z-index: 9999; mix-blend-mode: multiply; opacity: 0.4;
}

.font-ui { font-family: "Inter", sans-serif; }

/* 统一链接样式 */
a:not(.img-link) {
  text-decoration: none;
  color: inherit;
  border-bottom: 1px solid var(--line-color);
  transition: all 0.3s ease;
}
a:not(.img-link):hover {
  color: var(--accent);
  border-bottom-color: var(--accent);
}

/* === 升级版：Header 随机流动蒙版动画 === */
.header-mask {
  /* 核心技巧：构建一个巨大的、多层次的背景
     我们叠加了三个不同颜色的径向渐变光斑，并加上一个深色底色
  */
  background-image: 
    radial-gradient(circle at 20% 30%, var(--header-yellow) 0%, transparent 50%), /* 左上黄色光斑 */
    radial-gradient(circle at 80% 70%, var(--header-red) 0%, transparent 50%),    /* 右下红橘光斑 */
    radial-gradient(circle at 40% 60%, var(--header-orange) 0%, transparent 60%), /* 中间鲜橙光斑 */
    linear-gradient(to bottom right, #ff5722, #ff9800); /* 深色底色 */
    
  /* 关键：把背景放大到容器的 4 倍大，这样才有移动空间 */
  background-size: 400% 400%;
  
  /* SVG 遮罩设置 */
  -webkit-mask-image: url('/header.svg');
  mask-image: url('/header.svg');
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
  
  /* 应用新的随机流动动画，时长加长到 20s 保证平滑 */
  animation: flowRandomly 5s ease infinite alternate;
}

/* 新的动画：在一个巨大的背景范围内进行复杂的对角线移动
   这会营造出色彩随机流淌、此消彼长的感觉
*/
@keyframes flowRandomly {
  0% { background-position: 0% 0%; }
  25% { background-position: 80% 20%; }
  50% { background-position: 100% 100%; }
  75% { background-position: 20% 80%; }
  100% { background-position: 0% 0%; }
}


/* 入场动画 */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
main > header { animation: fadeInUp 0.8s ease-out forwards; }
main > section:nth-of-type(1) { animation: fadeInUp 0.8s ease-out 0.1s forwards; opacity: 0; }
main > hr:nth-of-type(1) { animation: fadeInUp 0.8s ease-out 0.15s forwards; opacity: 0; }
main > section:nth-of-type(2) { animation: fadeInUp 0.8s ease-out 0.2s forwards; opacity: 0; }
main > section:nth-of-type(3) { animation: fadeInUp 0.8s ease-out 0.3s forwards; opacity: 0; }
main > hr:nth-of-type(2) { animation: fadeInUp 0.8s ease-out 0.35s forwards; opacity: 0; }
main > section:nth-of-type(4) { animation: fadeInUp 0.8s ease-out 0.4s forwards; opacity: 0; }

/* 其他工具类 */
.divider { border: 0; height: 1px; background-image: linear-gradient(to right, transparent, var(--line-color), transparent); margin: 5rem 0; }
.scrollbar-custom { overflow-x: auto; padding-bottom: 1rem; scrollbar-width: thin; scrollbar-color: var(--accent) transparent; }
.scrollbar-custom::-webkit-scrollbar { height: 4px; }
.scrollbar-custom::-webkit-scrollbar-thumb { background-color: var(--accent); border-radius: 4px; }
.progress-track { width: 100%; height: 4px; background-color: var(--line-color); border-radius: 2px; overflow: hidden; position: relative; }
.progress-fill { height: 100%; background: var(--gradient-bar); position: absolute; top: 0; left: 0; border-radius: 2px; }
.container { max-width: 680px; margin: 0 auto; padding: 4rem 1.5rem; }

/* src/styles/global.css 末尾添加 */

/* === 夜间模式切换按钮 === */
.theme-toggle {
  position: fixed;
  top: 1.5rem;
  right: 1.5rem;
  z-index: 100; /* 保证在最上层 */
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  opacity: 0.5;
  transition: opacity 0.3s ease, background-color 0.3s;
}

.theme-toggle:hover {
  opacity: 1;
  background-color: rgba(0,0,0,0.05); /* 鼠标悬停时的微弱背景 */
}

/* 暗黑模式下悬停背景变亮一点 */
[data-theme="dark"] .theme-toggle:hover {
  background-color: rgba(255,255,255,0.1);
}

.theme-icon {
  width: 24px;
  height: 24px;
  display: block;
  /* 图标颜色跟随文字颜色 */
  filter: invert(0.2); 
}

/* 暗黑模式下反转图标颜色 */
[data-theme="dark"] .theme-icon {
  filter: invert(0.8);
}